

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Using Azure Mobile Services as an API proxy</title>
    <meta name="description" content="">

    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    

    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css?v=44c55ef586">
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet" type="text/css">

    <link rel="canonical" href="http://my-ghost-blog.com/using-azure-mobile-services-as-an-api-proxy/">
    <meta name="referrer" content="origin-when-cross-origin">
    
    <meta property="og:site_name" content="Sertaç Özercan">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Using Azure Mobile Services as an API proxy">
    <meta property="og:description" content="API proxies can be used for many applications including logging, analytics, convenience, security, changing backend services without affecting developers and many more. In this post, we are going to see two examples of API proxies (Twitter and Ordrin), and how to set up using Microsoft Azure Mobile Services. Twitter Since">
    <meta property="og:url" content="http://my-ghost-blog.com/using-azure-mobile-services-as-an-api-proxy/">
    <meta property="article:published_time" content="2014-06-28T10:50:35.000Z">
    <meta property="article:modified_time" content="2014-06-30T16:59:03.000Z">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Using Azure Mobile Services as an API proxy">
    <meta name="twitter:description" content="API proxies can be used for many applications including logging, analytics, convenience, security, changing backend services without affecting developers and many more. In this post, we are going to see two examples of API proxies (Twitter and Ordrin), and how to set up using Microsoft Azure Mobile Services. Twitter Since">
    <meta name="twitter:url" content="http://my-ghost-blog.com/using-azure-mobile-services-as-an-api-proxy/">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Sertaç Özercan">
    <meta name="twitter:site" content="@sozercan">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Sertaç Özercan",
        "logo": "http://my-ghost-blog.com/ghost/img/ghosticon.jpg"
    },
    "author": {
        "@type": "Person",
        "name": "Sertaç Özercan",
        "image": "//www.gravatar.com/avatar/b55d471041bacda59fdbe29c719a4f98?s=250&d=mm&r=x",
        "url": "http://my-ghost-blog.com/author/sozercan/",
        "sameAs": [
            "http://sertacozercan.com"
        ]
    },
    "headline": "Using Azure Mobile Services as an API proxy",
    "url": "http://my-ghost-blog.com/using-azure-mobile-services-as-an-api-proxy/",
    "datePublished": "2014-06-28T10:50:35.000Z",
    "dateModified": "2014-06-30T16:59:03.000Z",
    "description": "API proxies can be used for many applications including logging, analytics, convenience, security, changing backend services without affecting developers and many more. In this post, we are going to see two examples of API proxies (Twitter and Ordrin), and how to set up using Microsoft Azure Mobile Services. Twitter Since"
}
    </script>

    <meta name="generator" content="Ghost 0.9">
    <link rel="alternate" type="application/rss+xml" title="Sertaç Özercan" href="http://my-ghost-blog.com/rss/">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

    <link rel="stylesheet" type="text/css" href="../assets/css/prism.css?v=44c55ef586">
</head>

<body class="post-template">

    <div id="sidebar">
        <div id="sidebar-content" class="inner">
            
            <h2 class="blog-title"><a href="http://my-ghost-blog.com">Sertaç Özercan</a></h2>
            <h3 class="blog-description"></h3>

            <form id="search">
                <input id="search-field" placeholder="Search">
            </form>

            <div id="sidebar-links">
                <ul id="subscription-links">
                    <li><a target="_blank" href="http://my-ghost-blog.com/rss/"><i class="fa fa-rss"></i>Subscribe via RSS</a></li>
                    <!-- No support yet
                    <li><a target="_blank" href=" "><i class="fa fa-envelope"></i>Subscribe via email<a></li>
                    -->
                </ul>
                <ul id="navigation">
                        <li class="nav-home" role="presentation"><a href="../"><i class="fa fa-navicon"></i>Home</a></li>
    <li class="nav-projects" role="presentation"><a href="../projects/"><i class="fa fa-navicon"></i>Projects</a></li>
    <li class="nav-about" role="presentation"><a href="../about-me/"><i class="fa fa-navicon"></i>About</a></li>
    <li class="nav-publications" role="presentation"><a href="../publications/"><i class="fa fa-navicon"></i>Publications</a></li>

                </ul>
                <ul id="sidebar-external">
                    <li><a href="https://twitter.com/sozercan"><i class="fa fa-twitter"></i>Twitter</a></li>
<li><a href="https://github.com/sozercan"><i class="fa fa-github"></i>GitHub</a></li>
<li><a href="https://www.linkedin.com/in/sozercan"><i class="fa fa-linkedin"></i>LinkedIn</a></li>
<li><a target="_blank" href="mailto:sozercan@gmail.com"><i class="fa fa-envelope"></i>Contact</a></li>                </ul>
            </div>

            <footer class="site-footer">
                <section class="copyright">© 2016 <a href="mailto:sozercan@gmail.com">Sertaç Özercan</a></section>
                <section class="poweredby">
                    <i class="icon-ghost"></i><a href="https://ghost.org">Ghost</a> -
                    <a href="https://github.com/dlecina/StayPuft">StayPuft theme</a>
                </section>
            </footer>
        </div>
    </div>

    <main>
        <div class="main-inner">
            <section id="results"></section>
            


    <article class="post">

        <header class="post-header">

            <h1 class="post-title">Using Azure Mobile Services as an API proxy</h1>
            
            <section class="post-meta">
                <span class="post-time">
                    <i class="fa fa-calendar"></i>
                    <time datetime="2014-06-28" class="timeago">2 years ago</time>
                    <time datetime="2014-06-28" class="fulldate">June 28th, 2014</time>
                </span>
                
            </section>
        </header>

        <section class="post-content">
            <p>API proxies can be used for many applications including logging, analytics, convenience, security, changing backend services without affecting developers and many more.</p>

<p>In this post, we are going to see two examples of API proxies (Twitter and Ordrin), and how to set up using Microsoft Azure Mobile Services.</p>

<h4 id="twitter">Twitter</h4>

<p>Since Twitter switched to v1.1 API (and retired access to the v1 API), it might be a little tricky to access to Twitter API since it now uses oauth authentication to get any data. Azure Mobile Services makes it very easy to access Twitter (and Facebook, Google and Microsoft Live Connect).</p>

<p>For this example, we are going to be retrieve Twitter v1.1 API data by authenticating Twitter on Azure Mobile Services and setting up an API proxy for any search queries.</p>

<p>First thing is to create a Twitter app at <a href="https://apps.twitter.com/">https://apps.twitter.com/</a></p>

<p><a href="http://sertacozercan.com/wp-content/uploads/twitterAPI-1.png"><img src="http://sertacozercan.com/wp-content/uploads/twitterAPI-1-150x107.png" alt="twitterAPI-1" title=""></a></p>

<p>Once the app is registered, it will provide 4 types of keys: API key, API secret, access token and access token secret, which we will use in the Azure mobile service.</p>

<p><a href="http://sertacozercan.com/wp-content/uploads/twitterAPI-2.png"><img src="http://sertacozercan.com/wp-content/uploads/twitterAPI-2-150x107.png" alt="twitterAPI-2" title=""></a></p>

<p>Now, in Azure portal at <a href="https://manage.windowsazure.com">https://manage.windowsazure.com</a>, create a new mobile service</p>

<p><a href="http://sertacozercan.com/wp-content/uploads/twitterAPI-3.png"><img src="http://sertacozercan.com/wp-content/uploads/twitterAPI-3-150x107.png" alt="twitterAPI-3" title=""></a></p>

<p>And then create a new API. For GET request, you might want to change it as “Everyone”, so anyone without a key can access it.</p>

<p><a href="http://sertacozercan.com/wp-content/uploads/twitterAPI-4.png"><img src="http://sertacozercan.com/wp-content/uploads/twitterAPI-4-150x107.png" alt="twitterAPI-4" title=""></a></p>

<p>In the API section, use this code and replace API keys with your Twitter app. This provides a response to a GET method that includes a single query, and uses Twitter API to authenticate to twitter and search for the given query and respond back with the results. GET request should be to</p>

<p>https://<servicename>.azure-mobile.net/api/<apiname>?q=<searchquery></searchquery></apiname></servicename></p>

<p><a href="http://sertacozercan.com/wp-content/uploads/twitterAPI-5.png"><img src="http://sertacozercan.com/wp-content/uploads/twitterAPI-5-150x107.png" alt="twitterAPI-5" title=""></a></p>

<p>var http = require('request'); exports.get = function (request, response) { var twitterUrl = "<a href="https://api.twitter.com/1.1/search/tweets.json?q=%23">https://api.twitter.com/1.1/search/tweets.json?q=%23</a>" + request.query.q; // Create a new request with OAuth credentials. http.get({ url: twitterUrl, oauth: { consumer<em>key: "<api key>", consumer</api></em>secret: "<api secret>", token: "<access token>", token_secret: "<access secret>" }}, function (error, resp, body) { if (!error &amp;&amp; resp.statusCode <mark> 200) { response.send(200, body); } else { console.error('Could not contact Twitter'); } }); }</mark></access></access></api></p>

<h4 id="ordrin">Ordrin</h4>

<p><a href="http://ordr.in/">Ordrin </a>is an API provider that enables food ordering for any applications. Unfortunately, they don’t support Cross Origin Resource Sharing (CORS) yet, so xhr requests from the web is not accepted by their server, since the request isn’t in the list of Access-Control-Allow-Origin that Ordrin accepts.</p>

<p>To get around this limitation, we can set up an API proxy through Azure Mobile Services to route all request to the API there.</p>

<p>To get started, go to <a href="https://hackfood.ordr.in/">https://hackfood.ordr.in/</a> and register and create a new app.</p>

<p><a href="http://sertacozercan.com/wp-content/uploads/Ordrin-1.png"><img src="http://sertacozercan.com/wp-content/uploads/Ordrin-1-150x92.png" alt="Ordrin-1" title=""></a></p>

<p><a href="http://sertacozercan.com/wp-content/uploads/Ordrin-2.png"><img src="http://sertacozercan.com/wp-content/uploads/Ordrin-2-150x92.png" alt="Ordrin-2" title=""></a></p>

<p>Create a new API just like in the previous example and replace the secret key.</p>

<p>In this API call, we are going to be requesting list of restaurants in the area that delivers ASAP, and that requires a zip, city, and address. GET request should be sent to: (this time we have 3 different queries)</p>

<p>https://<servicename>.azure-mobile.net/api/<apiname>?zip=<searchquery>?city=<searchquery>?address=<searchquery></searchquery></searchquery></searchquery></apiname></servicename></p>

<p><a href="http://sertacozercan.com/wp-content/uploads/Ordrin-3.png"><img src="http://sertacozercan.com/wp-content/uploads/Ordrin-3-150x107.png" alt="Ordrin-3" title=""></a></p>

<p>var http = require('request'); exports.get = function(request, response) { var zip = request.query.zip; var city = request.query.city; var address = request.query.address; var url = '<a href="https://r-test.ordr.in/dl/ASAP/'+zip+'/'+city+'/'+address+'?">https://r-test.ordr.in/dl/ASAP/'+zip+'/'+city+'/'+address+'?</a><em>auth=1,<your key>'; http.get({ url: url }, function(err, getresponse, body) { if (err) { request.respond(statusCodes.INTERNAL</your></em>SERVER<em>ERROR, 'Unable to connect.'); } else if (response.statusCode ! 200) { request.respond(statusCodes.BAD</em>REQUEST, 'Bad request'); } else { request.respond(200, body); } }); };</p>
        </section>

        <footer class="post-footer">


                <figure class="author-image">
                    <a class="img" href="../author/sozercan/" style="background-image: url(http://www.gravatar.com/avatar/b55d471041bacda59fdbe29c719a4f98?s&amp;)"><span class="hidden">Sertaç Özercan's Picture</span></a>
                </figure>

                <section class="author">
                    <h4><a href="../author/sozercan/">Sertaç Özercan</a></h4>

                        <p>Read <a href="../author/sozercan/">more posts</a> by this author.</p>
                    <div class="author-meta">
                        <span class="author-location icon-location">San Francisco, CA</span>
                        <span class="author-link icon-link"><a href="http://sertacozercan.com">http://sertacozercan.com</a></span>
                    </div>
                </section>


            <section class="share">
                <h4>Share this post</h4>
                <div class="share-icons">
                    <a class="fa fa-twitter-square" href="https://twitter.com/intent/tweet?text=Using%20Azure%20Mobile%20Services%20as%20an%20API%20proxy&amp;url=http://my-ghost-blog.com/using-azure-mobile-services-as-an-api-proxy/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                        <span class="hidden">Twitter</span>
                    </a>
                    <a class="fa fa-facebook-square" href="https://www.facebook.com/sharer/sharer.php?u=http://my-ghost-blog.com/using-azure-mobile-services-as-an-api-proxy/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                        <span class="hidden">Facebook</span>
                    </a>
                    <a class="fa fa-google-plus-square" href="https://plus.google.com/share?url=http://my-ghost-blog.com/using-azure-mobile-services-as-an-api-proxy/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                        <span class="hidden">Google+</span>
                    </a>
                </div>
            </section>

        </footer>

        <section class="post-comments">
            <div id="disqus_thread"></div>
            <script type="text/javascript">
                /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                var disqus_shortname = 'sozercan'; // required: replace example with your forum shortname
                /* * * DON'T EDIT BELOW THIS LINE * * */
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </section>


    </article>


        </div>
    </main>

    

    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="../assets/js/jquery.fitvids.js?v=44c55ef586"></script>
    <script type="text/javascript" src="../assets/js/index.js?v=44c55ef586"></script>
    <script type="text/javascript" src="../assets/js/prism-loader.js?v=44c55ef586"></script>
    <script type="text/javascript" src="../assets/js/prism.js?v=44c55ef586"></script>
    <script src="../assets/js/jquery.ghostHunter.min.js?v=44c55ef586"></script>
    <script>
        $("#search-field").ghostHunter({
            rss : "http://my-ghost-blog.com/rss/",
            results : "#results",
            onKeyUp : true,
            zeroResultsInfo : false
        });
    </script>
</body>

